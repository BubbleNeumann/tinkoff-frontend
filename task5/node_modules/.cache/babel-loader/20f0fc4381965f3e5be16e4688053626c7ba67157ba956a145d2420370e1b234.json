{"ast":null,"code":"var _jsxFileName = \"/home/bubble-neumann/git/tinkoff-frontend/task5/src/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport \"./App.css\";\nimport { Header } from \"./components/header/header\";\nimport MovieDetails from \"./components/movie-details/movie-details\";\nimport MovieList from \"./components/movies-list/movie-list\";\nimport AddMovie from \"./components/add-movie/add-movie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction fetchAll() {\n  return fetch(\"http://localhost:3000/movies\").then(res => res.json()).catch(() => alert(\"can't fetch movie list\"));\n}\nconst App = () => {\n  _s();\n  const [movies, setMovies] = useState([]);\n  const [stateMovie, setStateMovie] = useState(null);\n  const [curMovie, setCurMovie] = useState(undefined);\n  useEffect(() => {\n    fetchAll().then(res => {\n      setMovies(res);\n    });\n  }, []);\n  const onSetCurrentMovie = useCallback(film => {\n    setCurMovie(film);\n    setStateMovie(null);\n  }, []);\n  const callAddMovie = useCallback(() => {\n    setStateMovie('ADD');\n  }, []);\n  const callEditMovie = useCallback(() => {\n    setStateMovie('EDIT');\n  }, []);\n  async function editMovie(num) {\n    try {\n      await fetch(`http://localhost:3000/movies/${num}`, {\n        method: \"PATCH\",\n        body: JSON.stringify(curMovie),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      });\n      await fetchAll().then(res => {\n        setMovies(res);\n      });\n      setStateMovie(null);\n    } catch (e) {\n      alert(\"can't fetch movie\");\n      console.error(e);\n    }\n  }\n  async function addMovie(film) {\n    const data = {\n      id: movies.length + 1,\n      ...film\n    };\n    try {\n      await fetch(\"http://localhost:3000/movies\", {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      });\n      await fetchAll().then(res => {\n        setMovies(res);\n      });\n      setCurMovie(data);\n      setStateMovie(null);\n    } catch (e) {\n      alert(\"can't fetch\");\n      console.error(e);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(MovieList, {\n        showMovie: onSetCurrentMovie,\n        callAddMovie: callAddMovie,\n        movies: movies,\n        setMovies: setMovies,\n        stateMovie: stateMovie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), curMovie && !stateMovie ? /*#__PURE__*/_jsxDEV(MovieDetails, {\n        movie: curMovie,\n        callEditMovie: callEditMovie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(AddMovie, {\n        addMovie: addMovie,\n        setStateMovie: setStateMovie,\n        movie: curMovie,\n        stateMovie: stateMovie,\n        editMovie: editMovie,\n        showMovie: onSetCurrentMovie,\n        setCurMovie: setCurMovie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"iGEIMywwgHFT0U0xds1nQgRM0gk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Header","MovieDetails","MovieList","AddMovie","jsxDEV","_jsxDEV","fetchAll","fetch","then","res","json","catch","alert","App","_s","movies","setMovies","stateMovie","setStateMovie","curMovie","setCurMovie","undefined","onSetCurrentMovie","film","callAddMovie","callEditMovie","editMovie","num","method","body","JSON","stringify","headers","e","console","error","addMovie","data","id","length","children","fileName","_jsxFileName","lineNumber","columnNumber","className","showMovie","movie","_c","$RefreshReg$"],"sources":["/home/bubble-neumann/git/tinkoff-frontend/task5/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport \"./App.css\";\nimport { Header } from \"./components/header/header\";\nimport MovieDetails from \"./components/movie-details/movie-details\";\nimport MovieList from \"./components/movies-list/movie-list\";\nimport AddMovie from \"./components/add-movie/add-movie\";\n\nfunction fetchAll() {\n  return fetch(\"http://localhost:3000/movies\")\n    .then((res) => res.json())\n    .catch(() => alert(\"can't fetch movie list\"));\n}\n\n\nconst App = () => {\n\n  \n  const [movies, setMovies] = useState([]);\n  const [stateMovie, setStateMovie] = useState(null);\n  const [curMovie, setCurMovie] = useState(undefined);\n\n  useEffect(() => {\n    fetchAll().then((res)=> {\n      setMovies(res);\n    })\n  }, []);\n  const onSetCurrentMovie = useCallback((film) => {\n    setCurMovie(film);\n    setStateMovie(null);\n  }, [])\n\n  const callAddMovie = useCallback(() => {\n    setStateMovie('ADD');\n  }, [])\n\n  const callEditMovie = useCallback( ()=> {\n    setStateMovie('EDIT');\n  }, [])\n\n  async function editMovie(num) {\n    try {\n      await fetch(`http://localhost:3000/movies/${num}`, {\n        method: \"PATCH\",\n        body: JSON.stringify(curMovie),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\",\n        },\n      });\n\n      await fetchAll().then((res)=> {\n        setMovies(res);\n      });\n      setStateMovie(null);\n    } catch (e) {\n      alert(\"can't fetch movie\");\n      console.error(e);\n    }\n  }\n\n  async function addMovie(film) {\n    const data = { id: movies.length + 1, ...film };\n    try {\n      await fetch(\"http://localhost:3000/movies\", {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\",\n        },\n      })\n\n      await fetchAll().then((res)=> {\n        setMovies(res);\n      });\n      setCurMovie(data);\n      setStateMovie(null);\n    } catch (e) {\n      alert(\"can't fetch\");\n      console.error(e);\n    }\n  }\n\n  return (\n    <div>\n      <Header />\n      <div className=\"main-content\">\n        <MovieList\n          showMovie={onSetCurrentMovie}\n          callAddMovie={callAddMovie}\n          movies={movies}\n          setMovies={setMovies}\n          stateMovie={stateMovie}\n        />\n        {curMovie && !stateMovie ? (\n          <MovieDetails\n            movie={curMovie}\n            callEditMovie={callEditMovie}\n          />\n        ) : (\n          <AddMovie\n            addMovie={addMovie}\n            setStateMovie={setStateMovie}\n            movie={curMovie}\n            stateMovie={stateMovie}\n            editMovie={editMovie}\n            showMovie={onSetCurrentMovie}\n            setCurMovie={setCurMovie}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}